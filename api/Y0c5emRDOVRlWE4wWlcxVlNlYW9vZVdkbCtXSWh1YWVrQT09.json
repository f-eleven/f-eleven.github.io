{"title":"SystemUI模块分析","date":"2018-03-26T15:22:11.000Z","excerpt":"","slug":"SystemUI模块分析","comments":true,"tags":["android systemui"],"categories":["Android"],"updated":"2018-03-26T15:23:17.671Z","content":"<h2 id=\"2018-3-26\"><a href=\"#2018-3-26\" class=\"headerlink\" title=\"2018/3/26\"></a>2018/3/26</h2><p>1.CommandQueue类中的setSystemUiVisibility在哪里调用？</p>\n<ul>\n<li>CommandQueue继承自IStatusBar.Stub，是IStatusBar的Binder Native端，这个Binder对象的Binder Proxy端将会保存在IStatusBarService中，<br>而StatusBarManagerService继承自IStatusBarService.Stub，这下就把Binder对象的Bn端和Bp端搞清楚了。</li>\n<li>在StatusBarManagerService中有这样一处的调用<br><code>mBar.setSystemUiVisibility(vis, fullscreenStackVis, dockedStackVis, mask, fullscreenBounds, dockedBounds);</code> ，显然这里的调用便链接到CommandQueue中的setSystemUiVisibility()方法。</li>\n<li>StatusBarManagerService中的setSystemUiVisibility()方法的调用则是在NavigationBarTransitions里面触发的，<code>mBarService.setSystemUiVisibility(0, View.SYSTEM_UI_FLAG_LOW_PROFILE, &quot;LightsOutListener&quot;);</code>，mBarService是通过<code>IStatusBarService.Stub.asInterface(ServiceManager.getService(Context.STATUS_BAR_SERVICE));</code>获取到IStausBarService实例。</li>\n</ul>\n","next":{"title":"我的数学启蒙","slug":"我的数学启蒙"}}